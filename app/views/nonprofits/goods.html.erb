
<div class="container" style="margin-top: 25px;">
  <div class="row" style="justify-content: space-evenly;">
    <div class="col-4" style="width: 18%;">
        <ul class="sticky-top" style="list-style: none; font-size: 17px;">
          <%= link_to 'Clear filters', goods_nonprofits_path, class:"clean"%>
          <div>
            <% @goods_categories.each do |goods_category| %>
              <li>
                <%= link_to goods_category.name, goods_nonprofits_path(goods_category: goods_category, city: params[:city]), class: "filter-btns #{goods_category.id.to_s == params[:goods_category] ? "filter-btns--active" : ""}" %>
              </li>
            <% end %>
          </div>
        </ul>
    </div>

    <div class="col-4">
      <%# create partial for the cards display since it is the same in goods and volunteer  %>
      <div class="sticky-top" style="background-color: white; height: 130px; width: 550px;">
        <div class="search-form" style="margin-left: 10px; color: grey; width: 300px; height:20px">
          <%= simple_form_for :search, url: goods_nonprofits_path, method: "GET", html: { class: 'form-inline' } do |f| %>
            <%= f.input :filter_by_city, collection: Nonprofit.pluck(:city).uniq, input_html: { name: 'city' }, selected: params[:city]%>
            <%= f.input :goods_category, as: :hidden, input_html: { value: params[:goods_category], name: 'goods_category' } %>
            <%= f.submit "Submit", class: "btn btn-search" %>
          <% end %>
        </div>
      </div>

      <div>
        <% @nonprofits.uniq.each do |nonprofit| %>
          <%= link_to nonprofit_path(nonprofit), target: "_blank" do %>
            <div class="card-product" style="margin-bottom: 30px; margin-top: 30px">
            <div>
              <%= carus_image(nonprofit.logo) %>
            </div>
            <div class="card-product-infos">
              <h5><strong><%= nonprofit.name %></strong></h5>
              <h6><%= nonprofit.city %></h6>
              <p><%= nonprofit.brief_description %></p>
              <i class="fa-regular fa-heart"></i>
            </div>
         </div>
          <% end %>
        <% end %>
       </div>

    </div>

    <div class="col-4">
      <div id="map" style="height: 490px; width: 100%; border-radius: 8px; margin-top: 10px; margin-left: 130px"
        data-controller="map"
        data-map-markers-value="<%= @markers.to_json %>"
        data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
      </div>
    </div>
  </div>
</div>
